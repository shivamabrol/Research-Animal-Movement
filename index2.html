<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-delaunay@6"></script>

    <svg id="map" x="0" y="0" width="1000" height="1000"></svg>
    <script>
      // Define an array of points
      const points = [
        [0, 0],
        [0, 1],
        [1, 0],
        [1, 1],
        [0.5, 0.5],
        [0.25, 0.75],
        [0.75, 0.25],
      ];

      // Compute the Delaunay triangulation
      const delaunay = d3.Delaunay.from(points);

      // Define the index of the cell to get the centroid for
      const cellIndex = 0;

      // Get the indices of the triangles that make up the cell
      const triangleIndices = delaunay.cellTriangles[cellIndex];

      // Get the polygon vertices for each triangle
      const polygonVertices = triangleIndices.map((triangleIndex) =>
        delaunay.trianglePolygon(triangleIndex)
      );

      // Compute the centroid of the polygon vertices
      const centroid = polygonVertices.reduce(
        (acc, curr) => [acc[0] + curr[0], acc[1] + curr[1]],
        [0, 0]
      );
      centroid[0] /= polygonVertices.length;
      centroid[1] /= polygonVertices.length;

      console.log(centroid);
    </script>
  </body>
</html>
